<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>! NYC Map !</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  :root{--ui-font:13px;--box-radius:12px;}
  html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;font-size:14px}
  #map{height:100vh;width:100%}
  .version-box{
    position:absolute; top:10px; right:10px;
    background:#fff;padding:8px 12px;border-radius:var(--box-radius);
    box-shadow:0 4px 12px rgba(0,0,0,.12);font-weight:600;font-size:var(--ui-font); z-index:1001;
  }
  #location-container{
    position:absolute; top:56px; right:10px; width:240px; max-height:78vh;
    background:#fff;border-radius:var(--box-radius); box-shadow:0 6px 18px rgba(0,0,0,.12);
    display:flex;flex-direction:column;overflow:hidden; z-index:1001;font-size:var(--ui-font);
  }
  #location-header{
    padding:10px 12px;background:#f6f6f6;border-bottom:1px solid #e6e6e6; cursor:pointer;
    font-weight:700;
  }
  #searchBox{
    display:none;margin:8px 10px;padding:6px;border-radius:6px;border:1px solid #ddd;
    font-size:13px; outline:none; width:calc(100% - 20px);
  }
  #subwayToggleContainer{
    display:none;padding:6px 10px;border-top:1px solid #f0f0f0;align-items:center;gap:8px;
  }
  #subwayToggleContainer input{transform:scale(1.05)}
  #locationList{
    display:none; overflow:auto; padding:6px 0; flex:1;
  }
  .category-title{padding:6px 12px;font-weight:700;border-top:1px solid #f3f3f3;background:#fafafa}
  .location-item{padding:8px 12px;border-bottom:1px solid #f0f0f0;cursor:pointer;}
  .location-item:hover{background:#f2f6fb}
  #routeInfo{
    position:absolute; bottom:12px; left:50%; transform:translateX(-50%);
    background:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.12);
    font-size:13px; z-index:1001; max-width:92%;text-align:center;
  }
  @media (max-width:600px){
    #location-container{width:180px; top:64px;}
    .version-box{font-size:12px}
    #routeInfo{font-size:12px;padding:6px 10px}
  }
</style>
</head>
<body>
<div id="map"></div>

<div class="version-box" id="versionBox">NYC Map 22/10/25 (v5.3)</div>

<div id="location-container" aria-hidden="true">
  <div id="location-header">Locations ▼</div>
  <input id="searchBox" type="text" placeholder="Search location..." />
  <div id="subwayToggleContainer">
    <input id="subwayToggle" type="checkbox" />
    <label for="subwayToggle">Show Subway Stations</label>
  </div>
  <div id="locationList" role="list"></div>
</div>

<div id="routeInfo">Select a location to see walking distance and time</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const versionDate = "22/10/25", versionNum = "5.3";
document.getElementById('versionBox').textContent = `NYC Map ${versionDate} (v${versionNum})`;

const currentLocation = [40.7851, -73.9683];
const map = L.map('map', {zoomControl:true}).setView(currentLocation, 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'© OpenStreetMap contributors'}).addTo(map);

const icons = {
  hotel: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/red-dot.png', iconSize:[32,32]}),
  sight: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/green-dot.png', iconSize:[32,32]}),
  rooftop: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/purple-dot.png', iconSize:[32,32]}),
  food: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/orange-dot.png', iconSize:[32,32]}),
  subway: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/blue-dot.png', iconSize:[26,26]}),
  me: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/blue.png', iconSize:[22,22]})
};
  const locations = {
  "Hotel": {"The Lexington Hotel":[40.7561,-73.9725,"hotel"]},
  "Sights": {
    "Times Square":[40.7580,-73.9855,"sight"],
    "Central Park":[40.7851,-73.9683,"sight"],
    "Union Square":[40.7359,-73.9911,"sight"],
    "Bryant Park":[40.7536,-73.9832,"sight"],
    "Saks Fifth Avenue":[40.7603,-73.9756,"sight"],
    "Rockefeller Center":[40.7587,-73.9787,"sight"],
    "St. Patrick’s Cathedral":[40.7585,-73.9760,"sight"],
    "Plaza Hotel":[40.7644,-73.9747,"sight"],
    "Washington Square Fountain":[40.7308,-73.9973,"sight"],
    "Brooklyn Bridge by day":[40.7061,-73.9969,"sight"],
    "Brooklyn Bridge by night":[40.7061,-73.9969,"sight"],
    "Broadway":[40.7590,-73.9845,"sight"],
    "Empire State Building":[40.7484,-73.9857,"sight"],
    "Brooklyn riverside":[40.7003,-73.9967,"sight"],
    "Highline":[40.7480,-74.0048,"sight"],
    "Meatpacking":[40.7420,-74.0062,"sight"],
    "The Met":[40.7794,-73.9632,"sight"],
    "Wall Street – Bull & NYSE":[40.7075,-74.0113,"sight"],
    "Grand Central Station":[40.7527,-73.9772,"sight"],
    "Flat Iron Building":[40.7411,-73.9897,"sight"],
    "South Port":[40.7069,-74.0035,"sight"],
    "9/11 Memorial":[40.7115,-74.0134,"sight"],
    "SoHo":[40.7233,-74.0020,"sight"],
    "Little Italy":[40.7191,-73.9973,"sight"],
    "Hudson Yards":[40.7540,-74.0020,"sight"],
    "Chelsea Market":[40.7424,-74.0060,"sight"],
    "Renwick Triangle":[40.7303,-73.9866,"sight"],
    "The Edge":[40.7534,-74.0007,"sight"],
    "Statue of Liberty":[40.6892,-74.0445,"sight"]
  },
  "Rooftop Bars": {
    "Le Bain":[40.7416,-74.0072,"rooftop"],
    "The Public":[40.7278,-74.0020,"rooftop"],
    "Darling Rooftop Bar and Lounge":[40.7675,-73.9819,"rooftop"]
  },
  "Food & Drinks": {
    "Blue Bottle":[40.7410,-73.9887,"food"],
    "Tompkins Bagels":[40.7282,-73.9911,"food"],
    "Black Seed Bagels":[40.7230,-73.9973,"food"],
    "Chipotle":[40.7591,-73.9840,"food"],
    "Baby Luc's (Pizza)":[40.6761,-73.9981,"food"]
  },
  "Subway Stations – Lower Manhattan": {
    "South Ferry":[40.701309,-74.013119,"subway"],
    "Bowling Green":[40.704288,-74.014027,"subway"],
    "Whitehall St":[40.703087,-74.012994,"subway"],
    "Rector St (1)":[40.707513,-74.013783,"subway"],
    "Rector St (R,W)":[40.70722,-74.0135,"subway"],
    "Wall St (2,3)":[40.707557,-74.011862,"subway"],
    "Wall St (4,5)":[40.706821,-74.0091,"subway"],
    "Fulton St":[40.710374,-74.007582,"subway"]
  },
  "Subway Stations – Upper Manhattan": {
    "14th St":[40.737826,-74.000236,"subway"],
    "23rd St":[40.744081,-73.995657,"subway"],
    "34th St – Penn Station":[40.750373,-73.99339,"subway"],
    "42nd St – Times Sq":[40.75529,-73.987495,"subway"],
    "72nd St":[40.778453,-73.98197,"subway"],
    "96th St":[40.793919,-73.972323,"subway"]
  }
};

const markers = {};
for (const cat of Object.keys(locations)) {
  for (const name of Object.keys(locations[cat])) {
    const [lat, lng, type] = locations[cat][name];
    const m = L.marker([lat,lng], {icon: icons[type]}).bindPopup(`<strong>${name}</strong>`);
    markers[name] = m;
    if (type !== 'subway') m.addTo(map);
  }
}
L.marker(currentLocation, {icon: icons.me}).addTo(map).bindPopup("You are here");

function distanceAndTime(latlng){
  const R=6371e3, φ1=currentLocation[0]*Math.PI/180, φ2=latlng.lat*Math.PI/180;
  const Δφ=(latlng.lat-currentLocation[0])*Math.PI/180, Δλ=(latlng.lng-currentLocation[1])*Math.PI/180;
  const a=Math.sin(Δφ/2)**2+Math.cos(φ1)*Math.cos(φ2)*Math.sin(Δλ/2)**2;
  const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
  const km=(R*c)/1000; return {km:km.toFixed(2),mins:Math.ceil((R*c)/(1.4*60))};
}

const list=document.getElementById('locationList');
function buildList(showSubways=false){
  list.innerHTML='';
  for(const cat of Object.keys(locations)){
    const title=document.createElement('div');
    title.className='category-title'; title.textContent=cat; list.appendChild(title);
    for(const name of Object.keys(locations[cat])){
      const type=locations[cat][name][2];
      if(type==='subway' && !showSubways) continue;
      const item=document.createElement('div');
      item.className='location-item'; item.textContent=name;
      item.onclick=()=>{const marker=markers[name]; map.panTo(marker.getLatLng()); marker.openPopup();
        const info=distanceAndTime(marker.getLatLng());
        document.getElementById('routeInfo').textContent=`${name} — ${info.km} km | ${info.mins} min walk`;};
      list.appendChild(item);
    }
  }
}
buildList(false);

document.getElementById('subwayToggle').addEventListener('change',function(){
  const show=this.checked;
  for(const cat of ["Subway Stations – Lower Manhattan","Subway Stations – Upper Manhattan"])
    for(const n of Object.keys(locations[cat]))
      show?markers[n].addTo(map):map.removeLayer(markers[n]);
  buildList(show);
});

const header=document.getElementById('location-header');
const search=document.getElementById('searchBox');
const toggleBox=document.getElementById('subwayToggleContainer');
let open=true;
function toggleList(){
  open=!open;
  search.style.display=open?'block':'none';
  toggleBox.style.display=open?'flex':'none';
  list.style.display=open?'block':'none';
  header.textContent=open?'Locations ▲':'Locations ▼';
}
header.addEventListener('click',toggleList);
search.addEventListener('input',function(){
  const q=this.value.toLowerCase();
  for(const e of document.getElementsByClassName('location-item'))
    e.style.display=e.textContent.toLowerCase().includes(q)?'':'none';
});
</script>
</body>
</html>
