<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>NYC Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    #map { height: 100vh; width: 100%; }

    .version-box {
      position: absolute;
      top: 10px;
      right: 10px;
      background: white;
      padding: 6px 12px;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
      font-weight: 600;
      font-size: 14px;
      z-index: 1000;
    }

    #location-container {
      position: absolute;
      top: 50px;
      right: 10px;
      width: 200px;
      max-height: 65vh;
      overflow-y: auto;
      background: #f0f0f0;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
      padding: 8px;
      z-index: 1000;
      transition: height 0.3s ease;
    }

    #searchBox {
      width: 100%;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      background-color: #f0f0f0;
    }

    #locationList {
      margin-top: 8px;
      display: none;
    }

    .location-item {
      cursor: pointer;
      padding: 4px 0;
      border-bottom: 1px solid #e0e0e0;
    }

    .location-item:last-child {
      border-bottom: none;
    }

    .location-item:hover {
      background-color: #e0e0e0;
    }

    @media (max-width: 600px) {
      .version-box {
        font-size: 12px;
        padding: 5px 10px;
      }
      #location-container {
        width: 180px;
      }
    }
  </style>
</head>
<body>
<div id="map"></div>
<div class="version-box" id="versionBox"></div>

<div id="location-container">
  <input type="text" id="searchBox" placeholder="Search location...">
  <div id="locationList"></div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// ---------------------------
// Version info (change only here)
var mapDate = "17 October 2025";
var mapVersion = 2.2;
// ---------------------------

document.getElementById("versionBox").innerText = "Map Version: " + mapDate + " (v" + mapVersion + ")";

var map = L.map('map').setView([40.7851, -73.9683], 12); // Center Park center (testing)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

var icons = {
  hotel: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/red-dot.png', iconSize:[32,32]}),
  sight: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/green-dot.png', iconSize:[32,32]}),
  food: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/orange-dot.png', iconSize:[32,32]}),
  rooftop: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/purple-dot.png', iconSize:[32,32]}),
  subway: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/blue-dot.png', iconSize:[28,28]})
};

var locations = {
  "The Lexington Hotel": {coords:[40.7561,-73.9725], type:"hotel"},
  "Times Square":[40.7580,-73.9855,"sight"],
  "Central Park":[40.7851,-73.9683,"sight"],
  "Union Square":[40.7359,-73.9911,"sight"],
  "Bryant Park":[40.7536,-73.9832,"sight"],
  "Saks Fifth Avenue":[40.7603,-73.9756,"sight"],
  "Rockefeller Center":[40.7587,-73.9787,"sight"],
  "St. Patrick’s Cathedral":[40.7585,-73.9760,"sight"],
  "Plaza Hotel":[40.7644,-73.9747,"sight"],
  "WSP":[40.7308,-73.9973,"sight"],
  "Brooklyn Bridge":[40.7061,-73.9969,"sight"],
  "Empire State Building":[40.7484,-73.9857,"sight"],
  "Highline":[40.7480,-74.0048,"sight"],
  "Meatpacking":[40.7420,-74.0062,"sight"],
  "The Met":[40.7794,-73.9632,"sight"],
  "Wall Street – Bull & NYSE":[40.7075,-74.0113,"sight"],
  "Grand Central Station":[40.7527,-73.9772,"sight"],
  "Flat Iron Building":[40.7411,-73.9897,"sight"],
  "South Port":[40.7069,-74.0035,"sight"],
  "9/11 Memorial":[40.7115,-74.0134,"sight"],
  "Circle Line Dock":[40.7057,-74.0134,"sight"],
  "Soho":[40.7233,-74.0020,"sight"],
  "Little Italy":[40.7191,-73.9973,"sight"],
  "Hudson Yards":[40.7540,-74.0020,"sight"],
  "Chelsea Market":[40.7424,-74.0060,"sight"],
  "Renwick Triangle":[40.7303,-73.9866,"sight"],
  "The Edge":[40.7534,-74.0007,"sight"],
  "Statue of Liberty":[40.6892,-74.0445,"sight"],
  // Food/Drinks
  "Blue Bottle":[40.7410,-73.9887,"food"],
  "Tompkins Bagels":[40.7282,-73.9911,"food"],
  "Black Seed Bagels":[40.7230,-73.9973,"food"],
  "Chipotle":[40.7591,-73.9840,"food"],
  "Baby Luc's (Pizza)":[40.6761,-73.9981,"food"],
  // Rooftop clubs
  "Le Bain":[40.7416,-74.0072,"rooftop"],
  "The Public":[40.7278,-74.0020,"rooftop"],
  // Subway stations
  "South Ferry":[40.7013,-74.0132,"subway"],
  "Bowling Green":[40.7040,-74.0134,"subway"],
  "Fulton St":[40.7104,-74.0072,"subway"]
};

var markers = {};
for (var key in locations) {
  var loc = locations[key];
  var coords = loc.coords || [loc[0], loc[1]];
  var type = loc.type || loc[2] || "sight";
  var marker = L.marker(coords, {icon: icons[type]}).bindPopup(key).addTo(map);
  markers[key] = marker;
}

// Generate list dynamically
var locationList = document.getElementById("locationList");
for (var key in locations) {
  var div = document.createElement("div");
  div.className = "location-item";
  div.innerText = key;
  div.onclick = (function(k) {
    return function() {
      map.setView(markers[k].getLatLng(), 16);
      markers[k].openPopup();
    };
  })(key);
  locationList.appendChild(div);
}

// Search filter + auto-expand list
var searchBox = document.getElementById("searchBox");
searchBox.addEventListener("input", function(){
  var filter = this.value.toLowerCase();
  var list = document.getElementById("locationList");
  var items = document.getElementsByClassName("location-item");
  if (filter.length > 0) list.style.display = "block";
  else list.style.display = "none";
  for (var i=0;i<items.length;i++){
    if(items[i].innerText.toLowerCase().indexOf(filter)>-1){
      items[i].style.display = "";
    } else {
      items[i].style.display = "none";
    }
  }
});
</script>
</body>
</html>
