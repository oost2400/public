<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NYC Map 20/10/2025 (v4.7)</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  body, html { margin:0; padding:0; height:100%; font-family: Arial, sans-serif; }
  #map { height:100%; width:100%; }
  #panel {
    position:absolute; top:10px; right:10px; width:260px; background:white;
    padding:10px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.3); z-index:1000;
  }
  #panelHeader { font-weight:bold; cursor:pointer; }
  #searchBox {
    width:100%; padding:6px; margin:8px 0; font-size:14px;
    border:1px solid #ccc; border-radius:5px; background:white;
  }
  #listContainer { max-height:300px; overflow-y:auto; }
  .category { font-weight:bold; margin-top:10px; border-bottom:1px solid #ccc; padding-bottom:3px; }
  .item { padding:5px; cursor:pointer; border-bottom:1px solid #eee; }
  .item:hover { background:#f7f7f7; }
  #routeInfo {
    position:absolute; bottom:10px; left:50%; transform:translateX(-50%);
    background:white; padding:8px 12px; border-radius:8px;
    box-shadow:0 2px 5px rgba(0,0,0,0.3); z-index:1000;
    font-size:14px;
  }
  @media (max-width: 768px) {
    #panel { width: 90%; right: 5%; top: 10px; }
    #routeInfo { font-size:12px; bottom:15px; }
  }
</style>
</head>
<body>
<div id="map"></div>
<div id="panel">
  <div id="panelHeader">Locations ▼</div>
  <input id="searchBox" placeholder="Search..." />
  <div>
    <input type="checkbox" id="toggleSubway" checked /> Show Subway Stations
  </div>
  <div id="listContainer"></div>
</div>
<div id="routeInfo">Select a location to see distance & walking time</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// -----------------------
const map = L.map('map').setView([40.785091, -73.968285], 13);

L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// -----------------------
const icons = {
  subway: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/blue-dot.png', iconSize:[28,28]}),
  sight: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/green-dot.png', iconSize:[28,28]}),
  food: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/orange-dot.png', iconSize:[28,28]}),
  rooftop: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/purple-dot.png', iconSize:[28,28]}),
  me: L.icon({iconUrl:'https://maps.google.com/mapfiles/ms/icons/blue.png', iconSize:[24,24]})
};

// Current location (Central Park)
const currentLocation = [40.785091, -73.968285];
L.marker(currentLocation, {icon: icons.me}).addTo(map).bindPopup("You are here");

// -----------------------
// All locations (example with top 10 subway + sights/rooftops/food)
const locations = {
  // Subway stations (top 10 Manhattan)
  "South Ferry": ["subway",[40.701309, -74.013119]],
  "Bowling Green": ["subway",[40.704288, -74.014027]],
  "Fulton St": ["subway",[40.710374, -74.007582]],
  "Chambers St": ["subway",[40.714111, -74.009039]],
  "Canal St": ["subway",[40.719527, -74.006735]],
  "14th St": ["subway",[40.737826, -74.000236]],
  "34th St - Herald Sq": ["subway",[40.749567, -73.987950]],
  "42nd St - Times Sq": ["subway",[40.755290, -73.987495]],
  "59th St - Columbus Circle": ["subway",[40.768044, -73.981893]],
  "1st Ave": ["subway",[40.731223, -73.978003]],

  // Sights
  "Times Square":["sight",[40.7580,-73.9855]],
  "Central Park":["sight",[40.7851,-73.9683]],
  "Union Square":["sight",[40.7359,-73.9911]],
  "Bryant Park":["sight",[40.7536,-73.9832]],
  "Saks Fifth Avenue":["sight",[40.7603,-73.9756]],
  "Rockefeller Center":["sight",[40.7587,-73.9787]],
  "St. Patrick’s Cathedral":["sight",[40.7585,-73.9760]],
  "Plaza Hotel":["sight",[40.7644,-73.9747]],
  "WSP":["sight",[40.7308,-73.9973]],
  "Brooklyn Bridge by day":["sight",[40.7061,-73.9969]],
  "Brooklyn Bridge by night":["sight",[40.7061,-73.9969]],
  "Broadway":["sight",[40.7590,-73.9845]],
  "Empire State Building":["sight",[40.7484,-73.9857]],
  "Highline":["sight",[40.7480,-74.0048]],
  "The Met":["sight",[40.7794,-73.9632]],

  // Rooftops
  "Le Bain":["rooftop",[40.7416,-74.0072]],
  "The Public":["rooftop",[40.7278,-74.0020]],
  "Darling Rooftop Bar and Lounge":["rooftop",[40.7644,-73.9768]],

  // Food & Drinks
  "Blue Bottle":["food",[40.7410,-73.9887]],
  "Tompkins Bagels":["food",[40.7282,-73.9911]],
  "Black Seed Bagels":["food",[40.7230,-73.9973]],
  "Chipotle":["food",[40.7591,-73.9840]],
  "Baby Luc's (Pizza)":["food",[40.6761,-73.9981]]
};

// -----------------------
// Add markers and list
const markers = {};
const listContainer = document.getElementById('listContainer');

Object.entries(locations).forEach(([name,[type,coords]])=>{
  const marker = L.marker(coords,{icon:icons[type]}).bindPopup(name).addTo(map);
  markers[name] = marker;

  const div = document.createElement('div');
  div.className = 'item';
  div.innerText = name;
  div.onclick = ()=> selectLocation(name);
  listContainer.appendChild(div);
});

// -----------------------
// Search filter
document.getElementById('searchBox').addEventListener('input', function(){
  const query = this.value.toLowerCase();
  document.querySelectorAll('.item').forEach(item=>{
    item.style.display = item.innerText.toLowerCase().includes(query) ? 'block' : 'none';
  });
});

// -----------------------
// Toggle Subway
document.getElementById('toggleSubway').addEventListener('change', function(){
  const show = this.checked;
  for(const [name,[type]] of Object.entries(locations)){
    if(type === "subway"){
      show ? map.addLayer(markers[name]) : map.removeLayer(markers[name]);
    }
  }
});

// -----------------------
// Selection + distance/time
function selectLocation(name){
  const marker = markers[name];
  map.setView(marker.getLatLng(), 15);
  marker.openPopup();
  const dist = map.distance(currentLocation, marker.getLatLng())/1000;
  const walkTime = Math.round((dist/5)*60);
  document.getElementById('routeInfo').innerText = 
    `${name} — Distance: ${dist.toFixed(2)} km | Est. walk: ${walkTime} min`;
}

// -----------------------
// Collapse panel
let collapsed = false;
document.getElementById('panelHeader').addEventListener('click', ()=>{
  collapsed = !collapsed;
  document.getElementById('listContainer').style.display = collapsed ? 'none' : 'block';
  document.getElementById('searchBox').style.display = collapsed ? 'none' : 'block';
});
</script>
</body>
</html>
